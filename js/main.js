$(document).ready(function() {	$('#resultats-recherche').hide();	$('#themes').hide();	$('#search-themes').text('Recherche d\'images par thèmes');		var themes = false;	/* RÉCUPÈRE LES PARAMÈTRES DE L'URL */		function getUrlParameter(sParam)	{	    var sPageURL = window.location.search.substring(1);	    var sURLVariables = sPageURL.split('&');	    for (var i = 0; i < sURLVariables.length; i++)	    {	        var sParameterName = sURLVariables[i].split('=');	        if (sParameterName[0] == sParam)	        {	            return sParameterName[1];	        }	    }	    	    return "FAIL";	}				/* FONCTIONS POUR LES DONNÉES CÔTÉ SERVEUR */		$('#aimer').click(function() {				var id_usr = $(this).attr('data-user');		var id_img = $(this).attr('data-img');		var operation = $(this).attr('data-op');		var imageEnCours = getUrlParameter('img');				$.ajax({			url: 'php/controller/aimer_operation.php',			type: 'POST',			data: "id_usr=" + id_usr + "&id_img=" + id_img + "&op=" + operation,			success: function(data) {							if (data.success) {					if (imageEnCours == "FAIL") {						window.location.href = "http://picstore.16mb.com/index.php";					} else {						window.location.href = "http://picstore.16mb.com/index.php?img=" + imageEnCours;					}									} else {					alert("une erreur est survenue : " + data.message);				}			},			error: function(data) {				alert("Erreur du serveur, merci de réessayer (Code : 002).");			}		});			});		/* CLIC SUR LA RECHERCHE PAR THEMES */		$('#search-themes').click(function() {			if (!themes) {						$('#normal').fadeOut(300, function() {				$('#themes').fadeIn(300);				themes = true;				$('#recherche-accueil').val('');			});						$('#search-themes').text('Recherche classique');			$('#resultats-recherche').html('');			$('#loader').remove();			$('#resultats-recherche').hide();					} else {			$('#themes').fadeOut(300, function() {				$('#normal').fadeIn(300);				themes = false;				$('#recherche-themes-accueil').val('Null');			});						$('#search-themes').text('Recherche d\'images par thèmes');			$('#resultats-recherche').html('');			$('#loader').remove();			$('#resultats-recherche').hide();		}			});			/* DETECTION DU COMMENCEMENT DE LA RECHERCHE */		$('#recherche-accueil').keyup(function() {			var champTexte = $(this);				$('#resultats-recherche').html('');				$('#loader').remove();				if (champTexte.val().length > 1) {						$.ajax({				url: 'php/controller/recherche_instantanee.php',				type: 'GET',				data: "op=normal" + "&donnees=" + $(this).val(),				beforeSend: function() {										$('#resultats-recherche').prepend('<img src="img/ajax-loader.gif" alt="loader" id="loader" />');									},				success: function(data) {									$('#loader').remove();										if (data.success) {						$('#resultats-recherche').css('height', '400px');						$('#resultats-recherche').show();						$('#resultats-recherche').html(data.message);					} else {						$('#resultats-recherche').css('height', '');						$('#resultats-recherche').show();						$('#resultats-recherche').html(data.message);					}									},				error: function(data) {					alert("Erreur du serveur, merci de réessayer (Code : 003).");				}			});					}				if (champTexte.val().length <= 1) {			$('#resultats-recherche').hide();		}			});			/* DETECTION DU COMMENCEMENT DE LA RECHERCHE PAR THEMES */		$('#recherche-themes-accueil').change(function() {				var selecteur = $(this);				$('#resultats-recherche').html('');				$('#loader').remove();				if (selecteur.val() != "Null") {						$.ajax({				url: 'php/controller/recherche_instantanee.php',				type: 'GET',				data: "donnees=" + $(this).val() + "&op=themes",				beforeSend: function() {										$('#resultats-recherche').prepend('<img src="img/ajax-loader.gif" alt="loader" id="loader" />');									},				success: function(data) {									$('#loader').remove();										if (data.success) {						$('#resultats-recherche').css('height', '300px');						$('#resultats-recherche').show();						$('#resultats-recherche').html(data.message);					} else {						$('#resultats-recherche').css('height', '');						$('#resultats-recherche').show();						$('#resultats-recherche').html(data.message);					}									},				error: function(data) {					alert("Erreur du serveur, merci de réessayer (Code : 004).");				}			});					} else {			$('#resultats-recherche').html('');			$('#loader').remove();			$('#resultats-recherche').hide();		}			});	});