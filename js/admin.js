$(document).ready(function() {  var suppressionEnCours = false;  var detailsEnCours = false;    $('.details').hide();
    /* Formulaire de connexion administrateur */  $('#form-admin').submit(function() {
		var donnees = $('#form-admin').serialize();
		/* DEBUG : console.log(donnees);*/
		$('.login-block').fadeOut(500, function() {
						/* Envoi des données au contrôleur PHP */			$.ajax({
				url: '../php/controller/authentification_admin.php',
				type: 'POST',
				data: donnees,
				success: function(data) {
					if (data.success) {
						$('#error-zone').fadeOut(500);
						$(location).attr('href', 'compte.php');
					} else {
						$('.login-block').fadeIn(500);
						$('#error-zone')
							.html(data.message)
							.fadeIn(500);
					}
				},
				error: function(data) {
					alert("Erreur lors de l'envoi des données en Ajax.");
					$('.login-block').fadeIn(500);
				}
			});
		});

		return false;
	});			/* Bouton pour afficher les détails d'une image */	$('.detail').click(function() {				/* Si un suppression n'est pas déjà en cours */		if (!suppressionEnCours && !detailsEnCours) {						detailsEnCours = true;						var id = $(this).attr('id');						/* Disparition du tableau "image" */			$('#title-images').fadeOut(500);			$('#image-table').fadeOut(500, function() {								/* Envoi des données au contrôleur PHP */				$.ajax({					url: '../php/controller/admin_operation.php',					type: 'POST',					data: "id=" + id + "&op=detailsimg", /* $_POST['id'] et $_POST['op'] en PHP */					success: function(data) {						if (data.success) {														$('#details').fadeIn(500);														$('#titre-details').text("Détails de l'image n°" + id);							$('#titre-img').text(data.titre);							$('#description-img').text(data.description);							$('#lien-img').html(data.lien);							$('#auteur-img').text(data.auteur);							$('#theme-img').text(data.theme);							$('#confid-img').text(data.confid);							$('#jaime-img').text(data.jaime);																				} else {							$('#titre-img').text("Une erreur est survenue !");						}					},					error: function(data) {												alert("Erreur lors de l'envoi des données en Ajax.");												$('#title-images').fadeIn(500);						$('#image-table').fadeIn(500);												detailsEnCours = false;					}				});							});					} else {					alert("Une opération est déjà en cours !");		}			});			/* Bouton pour sortir des détails d'une image */	$('.terminer').click(function() {				detailsEnCours = false;				$('#details').fadeOut(500, function() {						$('#title-images').fadeIn(500);			$('#image-table').fadeIn(500);					});							});			/* Bouton pour supprimer un utilisateur */	$('.user').click(function() {				/* Si un suppression n'est pas déjà en cours */		if (!suppressionEnCours && !detailsEnCours) {						suppressionEnCours = true;						/* Récupération de l'ID à supprimer */			var donnee = $(this).attr("id");						/* Disparition du tableau "utilisateur" */			$('#title-users').fadeOut(500);			$('#user-table').fadeOut(500, function() {				/* Apparition du message de confirmation */				$('#confirmDel').fadeIn(500);								/* Chargement du texte de confirmation */				$('#check-text-usr').text("Voulez-vous vraiment supprimer l'utilisateur n°" + donnee + " ?");								$('#ouiUsr').attr("id", donnee);							});					} else {			alert("Une opération est déjà en cours !");		}			});			/* Bouton pour confirmer la suppression d'un utilisateur */	$('.confirmUsr').click(function(){				/* Récupération de l'identifiant */		var identifiant = $(this).attr("id");				/* Disparition du message de confirmation */		$('#confirmDel').fadeOut(500, function() {						/* Si l'on a cliqué sur "Oui" */			if (identifiant != "nonUsr" && identifiant != "nonImg") {							/* Envoi des données au contrôleur PHP */				$.ajax({					url: '../php/controller/admin_operation.php',					type: 'POST',					data: "id=" + identifiant + "&op=suppuser", /* $_POST['id'] et $_POST['op'] en PHP */					success: function(data) {						if (data.success) {							suppressionEnCours = false;							$(location).attr('href', 'compte.php');						} else {							$('#confirmDel').fadeIn(500);							$('#check-text-usr').text("Une erreur est survenue au niveau " + data.message + " lors de la suppression d'un utilisateur. À vérifier d'urgence !");						}					},					error: function(data) {						alert("Erreur lors de l'envoi des données en Ajax.");						$('#confirmDel').fadeIn(500);					}				});			} 						/* Si l'on a cliqué sur "Non" */			else {				/* Apparition du tableau "utilisateur" */				$('#title-users').fadeIn(500);				$('#user-table').fadeIn(500);			}		});				suppressionEnCours = false;	});			/* Bouton pour supprimer une image */	$('.image').click(function() {				/* Si un suppression n'est pas déjà en cours */		if (!suppressionEnCours && !detailsEnCours) {						suppressionEnCours = true;						/* Récupération de l'ID à supprimer */			var donnee = $(this).attr("id");						/* Disparition du tableau "image" */			$('#title-images').fadeOut(500);			$('#image-table').fadeOut(500, function() {				/* Apparition du message de confirmation */				$('#confirmDelImg').fadeIn(500);								/* Chargement du texte de confirmation */				$('#check-text-img').text("Voulez-vous vraiment supprimer l'image n°" + donnee + " ?");								$('#ouiImg').attr("id", donnee);							});					} else {			alert("Une opération est déjà en cours !");		}			});			/* Bouton pour confirmer la suppression d'une image */	$('.confirmImg').click(function(){				/* Récupération de l'identifiant */		var identifiant = $(this).attr("id");				/* Disparition du message de confirmation */		$('#confirmDelImg').fadeOut(500, function() {						/* Si l'on a cliqué sur "Oui" */			if (identifiant != "nonImg" && identifiant != "nonUsr") {							/* Envoi des données au contrôleur PHP */				$.ajax({					url: '../php/controller/admin_operation.php',					type: 'POST',					data: "id=" + identifiant + "&op=suppimage", /* $_POST['id'] et $_POST['op'] en PHP */					success: function(data) {						if (data.success) {							suppressionEnCours = false;							$(location).attr('href', 'compte.php');						} else {							$('#confirmDelImg').fadeIn(500);							$('#check-text-img').text("Une erreur est survenue lors de la suppression d'image. À vérifier d'urgence !");						}					},					error: function(data) {						alert("Erreur lors de l'envoi des données en Ajax.");						$('#confirmDelImg').fadeIn(500);					}				});			} 						/* Si l'on a cliqué sur "Non" */			else {				/* Apparition du tableau "image" */				$('#title-images').fadeIn(500);				$('#image-table').fadeIn(500);			}		});				suppressionEnCours = false;	});		
});
